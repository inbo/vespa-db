{% load static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>VespaWatch Guest View</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link rel="stylesheet" href="{% static 'observations/css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>

<body>
    <div id="app">
        <div id="navbar">
            VespaWatch Dashboard
            <span v-if="isLoggedIn">
                {{ username }}
                <button @click="logout">Logout</button>
            </span>
            <a href="#" @click="showModal"
                style="float: right; color: white; text-decoration: none; padding: 10px;">Login</a>
        </div>
        <div v-if="isModalVisible" class="modal" style="display: flex;">
            <div class="modal-content">
                <span @click="hideModal" class="close">&times;</span>
                <h2>Login</h2>
                <input v-model="username" type="text" placeholder="Gebruikersnaam" />
                <input v-model="password" type="password" placeholder="Wachtwoord" />
                <button @click="login">Login</button>
            </div>
        </div>
        <div id="main-content">
            <div id="mapid"></div>
            <div id="details">
                <h3>Observation Details</h3>
                {% verbatim %}
                <div v-if="selectedObservation">
                    <p><strong>ID:</strong> {{ selectedObservation.id }}</p>
                    <p><strong>Location:</strong> {{ selectedObservation.location }}</p>
                    <p><strong>Status:</strong> <span v-if="!isEditing">{{ selectedObservation.status }}</span>
                        <select v-if="isEditing" v-model="selectedObservation.status">
                            <option value="UT">Untreated</option>
                            <option value="TR">Treated</option>
                        </select>
                    </p>
                    <button v-if="isLoggedIn && !isEditing" @click="startEdit">Updaten</button>
                    <button v-if="isLoggedIn && isEditing" @click="confirmUpdate">Bevestigen</button>
                </div>

                {% endverbatim %}
                <div v-else>
                    <p>No observation selected</p>
                </div>

            </div>
        </div>
        <div id="filters">
            <input type="text" placeholder="Gemeente" />
            <input type="text" placeholder="Status" />
        </div>
    </div>
    <script src="{% static 'observations/js/map.js' %}"></script>
</body>

</html>